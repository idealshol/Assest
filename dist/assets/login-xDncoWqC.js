import{a as w}from"./axios-CCb-kr4I.js";import{r as c,u as V,o as t,c as i,b as u,F as h,f as _,a as l,w as m,e as p,E as k,g as y,t as v}from"./index-CxSBg-BX.js";import{_ as b}from"./menu-Ct65YCoy.js";function g(){const r=localStorage.getItem("guard");return console.log(r),r=="true"}c.beforeEach(async(r,e)=>{if(console.log(g()),!g()&&r.name!=="Home")return alert("先登陆!"),{name:"Home"}});const C=V(),x={data(){return{user_history:[],username:"",password:"",password_again:"",islogin:!0,login_:!1}},methods:{submit(){localStorage.removeItem("guard");const r={status:this.islogin,username:this.username,password:this.password,password_again:this.password_again};w.post("http://127.0.0.1:5000/login",r).then(e=>{e.data.password_?(localStorage.setItem("guard","true"),this.login_=!0,alert("login successful"),C.push("/talk")):alert("password error")}).catch(e=>{e.respond?(alert("face some error:"+e.response.data.error),console.log("error:"+e.respond)):e.request&&alert("no respond from server 后端启动了?")})},change(){this.username="",this.password="",this.password_again="",this.islogin?this.islogin=!1:this.islogin=!0}}},S={key:0,class:"login"},E={key:1,class:"register"};function I(r,e,U,B,o,a){const n=k,d=y;return o.islogin?(t(),i("div",S,[e[8]||(e[8]=u("h2",null,"Login",-1)),(t(!0),i(h,null,_(o.user_history,(s,f)=>(t(),i("li",{key:f},v(s),1))),128)),l(n,{modelValue:o.username,"onUpdate:modelValue":e[0]||(e[0]=s=>o.username=s),placeholder:"username"},null,8,["modelValue"]),l(n,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=s=>o.password=s),placeholder:"password"},null,8,["modelValue"]),l(d,{type:"info",onClick:a.submit},{default:m(()=>e[7]||(e[7]=[p("Submit")])),_:1},8,["onClick"]),u("a",{class:"l2r",onClick:e[2]||(e[2]=(...s)=>a.change&&a.change(...s)),href:"javascript:void(0)"},"register")])):(t(),i("div",E,[e[10]||(e[10]=u("h2",null,"register",-1)),l(n,{modelValue:o.username,"onUpdate:modelValue":e[3]||(e[3]=s=>o.username=s),placeholder:"username"},null,8,["modelValue"]),l(n,{modelValue:o.password,"onUpdate:modelValue":e[4]||(e[4]=s=>o.password=s),placeholder:"password"},null,8,["modelValue"]),l(n,{modelValue:o.password_again,"onUpdate:modelValue":e[5]||(e[5]=s=>o.password_again=s),placeholder:"sure you password"},null,8,["modelValue"]),l(d,{type:"info",onClick:a.submit},{default:m(()=>e[9]||(e[9]=[p("Submit")])),_:1},8,["onClick"]),u("a",{class:"r2l",onClick:e[6]||(e[6]=(...s)=>a.change&&a.change(...s)),href:"javascript:void(0)"},"login")]))}const H=b(x,[["render",I],["__scopeId","data-v-ffc8d3e4"]]);export{H as l};
